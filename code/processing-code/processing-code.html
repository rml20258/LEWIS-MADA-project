<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="processing-code_files/libs/clipboard/clipboard.min.js"></script>
<script src="processing-code_files/libs/quarto-html/quarto.js"></script>
<script src="processing-code_files/libs/quarto-html/popper.min.js"></script>
<script src="processing-code_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="processing-code_files/libs/quarto-html/anchor.min.js"></script>
<link href="processing-code_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="processing-code_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="processing-code_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="processing-code_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="processing-code_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="data-import-and-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-import-and-cleaning">Data import and cleaning</h2>
<p>Each data source must be imported. Data sources can be merged based on country. Each dataset will be restricted to countries with vaccination coverage estimates in 2019 and 2022.</p>
<section id="hpv-coverage-and-vaccination-program-data" class="level4">
<h4 class="anchored" data-anchor-id="hpv-coverage-and-vaccination-program-data">HPV coverage and vaccination program data</h4>
<p>There are two data files to be imported for the HPV vaccination data, one file contains yearly coverage estimates and the other contains information about the HPV vaccination program.</p>
<section id="hpv-vaccination-coverage" class="level5">
<h5 class="anchored" data-anchor-id="hpv-vaccination-coverage">HPV vaccination coverage</h5>
<p>A total of 196 countries are included in the data set. Coverage estimates are available from 2010 to 2023, but most countries are missing on some years of data. Data manipulation will be needed to restrict to the years of interest and convert data form long to wide.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Importing yearly HPV vaccination coverage</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>hpv_coverage_raw <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw-data"</span>,<span class="st">"Human Papillomavirus (HPV) vaccination coverage 2025-21-01 11-57 UTC.xlsx"</span>), <span class="at">sheet =</span> <span class="st">"Sheet1"</span>, <span class="at">colNames =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#There are missing data, data will need to be converted from long to wide format to get a better sense of complete data</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(hpv_coverage_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gives total number of countries in the dataset</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(hpv_coverage_raw<span class="sc">$</span>YEAR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 
 196  196  196  196  196  196  196  196  196  196  196  196  196  195 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Taking a look at the structure of the dataset</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hpv_coverage_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,744
Columns: 11
$ GROUP                         &lt;chr&gt; "COUNTRIES", "COUNTRIES", "COUNTRIES", "…
$ CODE                          &lt;chr&gt; "AFG", "ALB", "DZA", "AND", "AGO", "ATG"…
$ NAME                          &lt;chr&gt; "Afghanistan", "Albania", "Algeria", "An…
$ YEAR                          &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023…
$ ANTIGEN                       &lt;chr&gt; "PRHPV1_F", "PRHPV1_F", "PRHPV1_F", "PRH…
$ ANTIGEN_DESCRIPTION           &lt;chr&gt; "HPV Vaccination program coverage, first…
$ COVERAGE_CATEGORY             &lt;chr&gt; "HPV", "HPV", "HPV", "HPV", "HPV", "HPV"…
$ COVERAGE_CATEGORY_DESCRIPTION &lt;chr&gt; "HPV Estimates", "HPV Estimates", "HPV E…
$ TARGET_NUMBER                 &lt;dbl&gt; NA, 15860, NA, NA, NA, 2961, 356756, 180…
$ DOSES                         &lt;dbl&gt; NA, 11713, NA, NA, NA, 45, 223675, 8165,…
$ COVERAGE                      &lt;dbl&gt; NA, 74, NA, 85, NA, 2, 63, 45, 71, 56, N…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(hpv_coverage_raw<span class="sc">$</span>GROUP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                   COUNTRIES Exported: 2025-28-1 3:56 UTC 
                        2729                            1 
                      GLOBAL 
                          14 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Restricting data to years 2019 and 2022</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>hpv_coverage <span class="ot">&lt;-</span> hpv_coverage_raw <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(GROUP <span class="sc">==</span> <span class="st">"COUNTRIES"</span>) <span class="sc">%&gt;%</span> <span class="co">#Deleting global estimates of country</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(CODE, NAME, YEAR, COVERAGE) <span class="sc">%&gt;%</span> <span class="co">#Restricting to variables that will be used </span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2022</span> <span class="sc">|</span> YEAR <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span> <span class="co">#Restricting to rows with year equal to 2019 or 2022</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#converting data from long to wide</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> YEAR, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> COVERAGE,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"coverage_"</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">coverage_2019 =</span> coverage_2019,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">coverage_2022 =</span> coverage_2022</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(coverage_2019) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(coverage_2022))</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpv_coverage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     CODE               NAME           coverage_2022   coverage_2019  
 Length:100         Length:100         Min.   : 0.00   Min.   : 1.00  
 Class :character   Class :character   1st Qu.:41.75   1st Qu.:48.50  
 Mode  :character   Mode  :character   Median :66.00   Median :71.50  
                                       Mean   :59.40   Mean   :64.86  
                                       3rd Qu.:82.25   3rd Qu.:86.00  
                                       Max.   :99.00   Max.   :99.00  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hpv_coverage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  CODE  NAME                coverage_2022 coverage_2019
  &lt;chr&gt; &lt;chr&gt;                       &lt;dbl&gt;         &lt;dbl&gt;
1 AND   Andorra                        83            64
2 ATG   Antigua and Barbuda             2            11
3 ARG   Argentina                      83            87
4 ARM   Armenia                        43            19
5 AUS   Australia                      77            89
6 AUT   Austria                        56            35</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving data to the processed data folder</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(hpv_coverage, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed-data"</span>,<span class="st">"hpv_coverage.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="hpv-vaccination-program-characteristics" class="level5">
<h5 class="anchored" data-anchor-id="hpv-vaccination-program-characteristics">HPV vaccination program characteristics</h5>
<p>A total of 196 countries are included in the data set. About one third of countries are missing year of introduction, and a few are missing country income. Other characteristics (e.g., delivery strategy) appear complete.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Importing HPV vaccination program characteristics</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>hpv_program_raw <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw-data"</span>,<span class="st">"who-dashboard-1dosecoverage-1-27-25.csv"</span>), <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#There are missing data, year of introduction is missing for about a third of countries, more checks will be done later among the countries with coverage estimtes from 2019 and 2022 because this missingness is likely due to countries that havne't introduced HPV vaccination yet</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(hpv_program_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gives total number of countries in the dataset</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(hpv_program_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 196</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data cleaning</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>hpv_program <span class="ot">&lt;-</span> hpv_program_raw <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>HPV1_COVERAGELASTYEAR,<span class="sc">-</span>HPVC_COVERAGELASTYEAR, <span class="sc">-</span>HPV_AGEADMINISTERED) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE =</span> ISO_3_CODE) <span class="sc">%&gt;%</span> <span class="co">#renaming the ID variable, a unique country specific code, so this can be used to merge across datasets</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">doses_rec =</span> <span class="fu">if_else</span>(<span class="fu">substr</span>(HPV_INT_DOSES,<span class="dv">1</span>,<span class="dv">1</span>) <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>,       <span class="fu">if_else</span>(<span class="fu">substr</span>(HPV_INT_DOSES,<span class="dv">1</span>,<span class="dv">1</span>) <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">2</span>, <span class="cn">NA</span>)))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hpv_program)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          COUNTRYNAME CODE WHO_REGION           WB_INCOME HPV_NATIONAL_SCHEDULE
1         Afghanistan  AFG        EMR          Low income                    No
2             Albania  ALB        EUR Upper middle income                   Yes
3             Algeria  DZA        AFR Lower middle income                    No
4             Andorra  AND        EUR         High income                   Yes
5              Angola  AGO        AFR Lower middle income                    No
6 Antigua and Barbuda  ATG        AMR         High income                   Yes
  HPV_YEAR_INTRODUCTION HPV_PRIM_DELIV_STRATEGY    HPV_SEX      HPV_INT_DOSES
1                    NA                                    Not yet introduced
2                  2022          Facility-based     Female             1 dose
3                    NA                                    Not yet introduced
4                  2014            School-based Both sexes 2 doses (6 months)
5                    NA                                    Not yet introduced
6                  2018          Facility-based Both sexes 2 doses (6 months)
  doses_rec
1        NA
2         1
3        NA
4         2
5        NA
6         2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hpv_program)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> COUNTRYNAME            CODE            WHO_REGION         WB_INCOME        
 Length:196         Length:196         Length:196         Length:196        
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
 HPV_NATIONAL_SCHEDULE HPV_YEAR_INTRODUCTION HPV_PRIM_DELIV_STRATEGY
 Length:196            Min.   :2006          Length:196             
 Class :character      1st Qu.:2011          Class :character       
 Mode  :character      Median :2017          Mode  :character       
                       Mean   :2016                                 
                       3rd Qu.:2020                                 
                       Max.   :2024                                 
                       NA's   :47                                   
   HPV_SEX          HPV_INT_DOSES        doses_rec    
 Length:196         Length:196         Min.   :1.000  
 Class :character   Class :character   1st Qu.:1.000  
 Mode  :character   Mode  :character   Median :2.000  
                                       Mean   :1.559  
                                       3rd Qu.:2.000  
                                       Max.   :2.000  
                                       NA's   :51     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving data to the processed data folder</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(hpv_program, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed-data"</span>,<span class="st">"hpv_program.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I am incrementally building the combined data set. As a first step, I am combining the HPV vaccination coverage estimates with the HPV vaccination program information and performing some basic data checks. Other combinations will be performed in the <em>Combining all datasets</em> section below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>combo <span class="ot">&lt;-</span> hpv_coverage <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(hpv_program, <span class="at">by =</span> <span class="fu">join_by</span>(CODE))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  CODE  NAME        coverage_2022 coverage_2019 COUNTRYNAME WHO_REGION WB_INCOME
  &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    
1 AND   Andorra                83            64 Andorra     EUR        High inc…
2 ATG   Antigua an…             2            11 Antigua an… AMR        High inc…
3 ARG   Argentina              83            87 Argentina   AMR        Upper mi…
4 ARM   Armenia                43            19 Armenia     EUR        Upper mi…
5 AUS   Australia              77            89 Australia   WPR        High inc…
6 AUT   Austria                56            35 Austria     EUR        High inc…
# ℹ 6 more variables: HPV_NATIONAL_SCHEDULE &lt;chr&gt;, HPV_YEAR_INTRODUCTION &lt;int&gt;,
#   HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;, HPV_INT_DOSES &lt;chr&gt;,
#   doses_rec &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Checking to see if any of the countries didn't match correctly by comparing the country names in each dataset</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>non_matches <span class="ot">&lt;-</span> combo <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">!=</span> COUNTRYNAME)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(non_matches)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 13
  CODE  NAME        coverage_2022 coverage_2019 COUNTRYNAME WHO_REGION WB_INCOME
  &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    
1 CIV   Côte d&amp;#39…            46             6 Côte d'Ivo… AFR        Lower mi…
# ℹ 6 more variables: HPV_NATIONAL_SCHEDULE &lt;chr&gt;, HPV_YEAR_INTRODUCTION &lt;int&gt;,
#   HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;, HPV_INT_DOSES &lt;chr&gt;,
#   doses_rec &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#One country, Côte d'Ivoire, came up in this check, however, this only came up because the name of the country has some formatting issues in one of the datasets, this isn't a merging problem</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Data are </span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">proc_freq</span>(combo, <span class="fu">c</span>(<span class="st">"WHO_REGION"</span>, <span class="st">"WB_INCOME"</span>, <span class="st">"HPV_NATIONAL_SCHEDULE"</span>, <span class="st">"HPV_YEAR_INTRODUCTION"</span>, <span class="st">"HPV_PRIM_DELIV_STRATEGY"</span>, <span class="st">"HPV_SEX"</span>, <span class="st">"HPV_INT_DOSES"</span>), <span class="at">options =</span> <span class="st">"missing"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$WHO_REGION
# A tibble: 7 × 5
  VAR        CAT       N   CNT   PCT
  &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 WHO_REGION .       100     0     0
2 WHO_REGION AFR     100    16    16
3 WHO_REGION AMR     100    29    29
4 WHO_REGION EMR     100     1     1
5 WHO_REGION EUR     100    36    36
6 WHO_REGION SEAR    100     4     4
7 WHO_REGION WPR     100    14    14

$WB_INCOME
# A tibble: 5 × 5
  VAR       CAT                     N   CNT   PCT
  &lt;chr&gt;     &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 WB_INCOME .                     100     1     1
2 WB_INCOME High income           100    48    48
3 WB_INCOME Low income            100     6     6
4 WB_INCOME Lower middle income   100    14    14
5 WB_INCOME Upper middle income   100    31    31

$HPV_NATIONAL_SCHEDULE
# A tibble: 3 × 5
  VAR                   CAT               N   CNT   PCT
  &lt;chr&gt;                 &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 HPV_NATIONAL_SCHEDULE .               100     0     0
2 HPV_NATIONAL_SCHEDULE Yes             100    98    98
3 HPV_NATIONAL_SCHEDULE Yes (Partial)   100     2     2

$HPV_YEAR_INTRODUCTION
# A tibble: 15 × 5
   VAR                   CAT       N   CNT   PCT
   &lt;chr&gt;                 &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 HPV_YEAR_INTRODUCTION .       100     0     0
 2 HPV_YEAR_INTRODUCTION 2006    100     3     3
 3 HPV_YEAR_INTRODUCTION 2007    100     5     5
 4 HPV_YEAR_INTRODUCTION 2008    100     7     7
 5 HPV_YEAR_INTRODUCTION 2009    100     7     7
 6 HPV_YEAR_INTRODUCTION 2010    100     8     8
 7 HPV_YEAR_INTRODUCTION 2011    100     5     5
 8 HPV_YEAR_INTRODUCTION 2012    100     4     4
 9 HPV_YEAR_INTRODUCTION 2013    100     9     9
10 HPV_YEAR_INTRODUCTION 2014    100     8     8
11 HPV_YEAR_INTRODUCTION 2015    100     4     4
12 HPV_YEAR_INTRODUCTION 2016    100     9     9
13 HPV_YEAR_INTRODUCTION 2017    100     7     7
14 HPV_YEAR_INTRODUCTION 2018    100     8     8
15 HPV_YEAR_INTRODUCTION 2019    100    16    16

$HPV_PRIM_DELIV_STRATEGY
# A tibble: 5 × 5
  VAR                     CAT                           N   CNT   PCT
  &lt;chr&gt;                   &lt;chr&gt;                     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 HPV_PRIM_DELIV_STRATEGY .                           100     0     0
2 HPV_PRIM_DELIV_STRATEGY Facility-based              100    23    23
3 HPV_PRIM_DELIV_STRATEGY Mixed                       100    15    15
4 HPV_PRIM_DELIV_STRATEGY School-based                100    60    60
5 HPV_PRIM_DELIV_STRATEGY Varies by region/province   100     2     2

$HPV_SEX
# A tibble: 3 × 5
  VAR     CAT            N   CNT   PCT
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 HPV_SEX .            100     0     0
2 HPV_SEX Both sexes   100    61    61
3 HPV_SEX Female       100    39    39

$HPV_INT_DOSES
# A tibble: 5 × 5
  VAR           CAT                       N   CNT   PCT
  &lt;chr&gt;         &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 HPV_INT_DOSES ""                      100     1     1
2 HPV_INT_DOSES "."                     100     0     0
3 HPV_INT_DOSES "1 dose"                100    37    37
4 HPV_INT_DOSES "2 doses (12 months)"   100     4     4
5 HPV_INT_DOSES "2 doses (6 months)"    100    58    58</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data were very complete, at most variables had 1 country with missing data</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Reviewing the countries with missing data on any of the variables</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>combo_missing <span class="ot">&lt;-</span> combo <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HPV_INT_DOSES<span class="sc">==</span><span class="st">""</span> <span class="sc">|</span> WB_INCOME <span class="sc">==</span><span class="st">"."</span> )</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(combo_missing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 13
  CODE  NAME    coverage_2022 coverage_2019 COUNTRYNAME WHO_REGION WB_INCOME  
  &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      
1 BHS   Bahamas            33            27 Bahamas     AMR        High income
# ℹ 6 more variables: HPV_NATIONAL_SCHEDULE &lt;chr&gt;, HPV_YEAR_INTRODUCTION &lt;int&gt;,
#   HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;, HPV_INT_DOSES &lt;chr&gt;,
#   doses_rec &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Only 2 countries total were missing data on at least one variable, Bahamas and Palau, these countries will be retained since classification tree analysis is less affected by missing data</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting list of countries in the combo dataset to use for subsetting other datasets</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> combo <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(CODE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="united-nations-data" class="level4">
<h4 class="anchored" data-anchor-id="united-nations-data">United Nations data</h4>
<p>There are 238 countries with yearly data from 1950 to 2023. Data appear mostly complete (ISO2 Alpha-code is missing for some rows but this is missing for all World and Region specific rows since this is a code to indicate country). Data will be restricted to the two years of interest during the next part of the project.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>u_n_raw <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw-data"</span>,<span class="st">"WPP2024_GEN_F01_DEMOGRAPHIC_INDICATORS_COMPACT.xlsx"</span>), <span class="at">sheet =</span> <span class="st">"Estimates"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>header_row <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>column_names_un <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">unlist</span>(u_n_raw[header_row, ]))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data again, skipping the rows before the header</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>u_nations_full <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw-data"</span>,<span class="st">"WPP2024_GEN_F01_DEMOGRAPHIC_INDICATORS_COMPACT.xlsx"</span>), <span class="at">sheet =</span> <span class="st">"Estimates"</span>, <span class="at">startRow =</span> <span class="dv">18</span>, <span class="at">colNames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(u_nations_full) <span class="ot">&lt;-</span> column_names_un</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting number of countries</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>u_nations_count <span class="ot">&lt;-</span> <span class="fu">table</span>(u_nations_full<span class="sc">$</span><span class="st">`</span><span class="at">ISO3 Alpha-code</span><span class="st">`</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(u_nations_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 238</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#238 countries</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting number of years</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(u_nations_full<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     1950 1951 1952 1953 1954 1955 1956 1957 1958 1959 1960 1961 1962 1963 1964 
   5  297  297  297  297  297  297  297  297  297  297  297  297  297  297  297 
1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 
 297  297  297  297  297  297  297  297  297  297  297  297  297  297  297  297 
1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 
 297  297  297  297  297  297  297  297  297  297  297  297  297  297  297  297 
1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 
 297  297  297  297  297  297  297  297  297  297  297  297  297  297  297  297 
2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 
 297  297  297  297  297  297  297  297  297  297  297 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Year ranges from 1950 to 2023</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#There are missing data, year of introduction is missing for about a third of countries</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(u_nations_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Current dataset includes data at higher levels than just country, will check this again once data are restricted to countries of interest </span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(u_nations_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Index         Variant          Region, subregion, country or area *
 Min.   :    1   Length:21983       Length:21983                        
 1st Qu.: 5496   Class :character   Class :character                    
 Median :10992   Mode  :character   Mode  :character                    
 Mean   :10992                                                          
 3rd Qu.:16488                                                          
 Max.   :21983                                                          
    Notes           Location code    ISO3 Alpha-code    ISO2 Alpha-code   
 Length:21983       Min.   :   4.0   Length:21983       Length:21983      
 Class :character   1st Qu.: 275.0   Class :character   Class :character  
 Mode  :character   Median : 548.0   Mode  :character   Mode  :character  
                    Mean   : 686.8                                        
                    3rd Qu.: 826.0                                        
                    Max.   :5505.0                                        
 SDMX code**            Type            Parent code       Year          
 Length:21983       Length:21983       Min.   :   0   Length:21983      
 Class :character   Class :character   1st Qu.: 914   Class :character  
 Mode  :character   Mode  :character   Median : 922   Mode  :character  
                                       Mean   :1236                     
                                       3rd Qu.: 931                     
                                       Max.   :5501                     
 Total Population, as of 1 January (thousands)
 Length:21983                                 
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Total Population, as of 1 July (thousands)
 Length:21983                              
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Male Population, as of 1 July (thousands)
 Length:21983                             
 Class :character                         
 Mode  :character                         
                                          
                                          
                                          
 Female Population, as of 1 July (thousands)
 Length:21983                               
 Class :character                           
 Mode  :character                           
                                            
                                            
                                            
 Population Density, as of 1 July (persons per square km)
 Length:21983                                            
 Class :character                                        
 Mode  :character                                        
                                                         
                                                         
                                                         
 Population Sex Ratio, as of 1 July (males per 100 females)
 Length:21983                                              
 Class :character                                          
 Mode  :character                                          
                                                           
                                                           
                                                           
 Median Age, as of 1 July (years)
 Length:21983                    
 Class :character                
 Mode  :character                
                                 
                                 
                                 
 Natural Change, Births minus Deaths (thousands)
 Length:21983                                   
 Class :character                               
 Mode  :character                               
                                                
                                                
                                                
 Rate of Natural Change (per 1,000 population) Population Change (thousands)
 Length:21983                                  Length:21983                 
 Class :character                              Class :character             
 Mode  :character                              Mode  :character             
                                                                            
                                                                            
                                                                            
 Population Growth Rate (percentage) Population Annual Doubling Time (years)
 Length:21983                        Length:21983                           
 Class :character                    Class :character                       
 Mode  :character                    Mode  :character                       
                                                                            
                                                                            
                                                                            
 Births (thousands) Births by women aged 15 to 19 (thousands)
 Length:21983       Length:21983                             
 Class :character   Class :character                         
 Mode  :character   Mode  :character                         
                                                             
                                                             
                                                             
 Crude Birth Rate (births per 1,000 population)
 Length:21983                                  
 Class :character                              
 Mode  :character                              
                                               
                                               
                                               
 Total Fertility Rate (live births per woman)
 Length:21983                                
 Class :character                            
 Mode  :character                            
                                             
                                             
                                             
 Net Reproduction Rate (surviving daughters per woman)
 Length:21983                                         
 Class :character                                     
 Mode  :character                                     
                                                      
                                                      
                                                      
 Mean Age Childbearing (years) Sex Ratio at Birth (males per 100 female births)
 Length:21983                  Length:21983                                    
 Class :character              Class :character                                
 Mode  :character              Mode  :character                                
                                                                               
                                                                               
                                                                               
 Total Deaths (thousands) Male Deaths (thousands) Female Deaths (thousands)
 Length:21983             Length:21983            Length:21983             
 Class :character         Class :character        Class :character         
 Mode  :character         Mode  :character        Mode  :character         
                                                                           
                                                                           
                                                                           
 Crude Death Rate (deaths per 1,000 population)
 Length:21983                                  
 Class :character                              
 Mode  :character                              
                                               
                                               
                                               
 Life Expectancy at Birth, both sexes (years)
 Length:21983                                
 Class :character                            
 Mode  :character                            
                                             
                                             
                                             
 Male Life Expectancy at Birth (years) Female Life Expectancy at Birth (years)
 Length:21983                          Length:21983                           
 Class :character                      Class :character                       
 Mode  :character                      Mode  :character                       
                                                                              
                                                                              
                                                                              
 Life Expectancy at Age 15, both sexes (years)
 Length:21983                                 
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 15 (years)
 Length:21983                          
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 15 (years)
 Length:21983                            
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Life Expectancy at Age 65, both sexes (years)
 Length:21983                                 
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 65 (years)
 Length:21983                          
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 65 (years)
 Length:21983                            
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Life Expectancy at Age 80, both sexes (years)
 Length:21983                                 
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 80 (years)
 Length:21983                          
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 80 (years)
 Length:21983                            
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Infant Deaths, under age 1 (thousands)
 Length:21983                          
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Infant Mortality Rate (infant deaths per 1,000 live births)
 Length:21983                                               
 Class :character                                           
 Mode  :character                                           
                                                            
                                                            
                                                            
 Live Births Surviving to Age 1 (thousands)
 Length:21983                              
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Under-Five Deaths, under age 5 (thousands)
 Length:21983                              
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Under-Five Mortality (deaths under age 5 per 1,000 live births)
 Length:21983                                                   
 Class :character                                               
 Mode  :character                                               
                                                                
                                                                
                                                                
 Mortality before Age 40, both sexes (deaths under age 40 per 1,000 live births)
 Length:21983                                                                   
 Class :character                                                               
 Mode  :character                                                               
                                                                                
                                                                                
                                                                                
 Male Mortality before Age 40 (deaths under age 40 per 1,000 male live births)
 Length:21983                                                                 
 Class :character                                                             
 Mode  :character                                                             
                                                                              
                                                                              
                                                                              
 Female Mortality before Age 40 (deaths under age 40 per 1,000 female live births)
 Length:21983                                                                     
 Class :character                                                                 
 Mode  :character                                                                 
                                                                                  
                                                                                  
                                                                                  
 Mortality before Age 60, both sexes (deaths under age 60 per 1,000 live births)
 Length:21983                                                                   
 Class :character                                                               
 Mode  :character                                                               
                                                                                
                                                                                
                                                                                
 Male Mortality before Age 60 (deaths under age 60 per 1,000 male live births)
 Length:21983                                                                 
 Class :character                                                             
 Mode  :character                                                             
                                                                              
                                                                              
                                                                              
 Female Mortality before Age 60 (deaths under age 60 per 1,000 female live births)
 Length:21983                                                                     
 Class :character                                                                 
 Mode  :character                                                                 
                                                                                  
                                                                                  
                                                                                  
 Mortality between Age 15 and 50, both sexes (deaths under age 50 per 1,000 alive at age 15)
 Length:21983                                                                               
 Class :character                                                                           
 Mode  :character                                                                           
                                                                                            
                                                                                            
                                                                                            
 Male Mortality between Age 15 and 50 (deaths under age 50 per 1,000 males alive at age 15)
 Length:21983                                                                              
 Class :character                                                                          
 Mode  :character                                                                          
                                                                                           
                                                                                           
                                                                                           
 Female Mortality between Age 15 and 50 (deaths under age 50 per 1,000 females alive at age 15)
 Length:21983                                                                                  
 Class :character                                                                              
 Mode  :character                                                                              
                                                                                               
                                                                                               
                                                                                               
 Mortality between Age 15 and 60, both sexes (deaths under age 60 per 1,000 alive at age 15)
 Length:21983                                                                               
 Class :character                                                                           
 Mode  :character                                                                           
                                                                                            
                                                                                            
                                                                                            
 Male Mortality between Age 15 and 60 (deaths under age 60 per 1,000 males alive at age 15)
 Length:21983                                                                              
 Class :character                                                                          
 Mode  :character                                                                          
                                                                                           
                                                                                           
                                                                                           
 Female Mortality between Age 15 and 60 (deaths under age 60 per 1,000 females alive at age 15)
 Length:21983                                                                                  
 Class :character                                                                              
 Mode  :character                                                                              
                                                                                               
                                                                                               
                                                                                               
 Net Number of Migrants (thousands) Net Migration Rate (per 1,000 population)
 Length:21983                       Length:21983                             
 Class :character                   Class :character                         
 Mode  :character                   Mode  :character                         
                                                                             
                                                                             
                                                                             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(u_nations_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Index   Variant Region, subregion, country or area * Notes Location code
21978 21978 Estimates            Wallis and Futuna Islands     2           876
21979 21979 Estimates            Wallis and Futuna Islands     2           876
21980 21980 Estimates            Wallis and Futuna Islands     2           876
21981 21981 Estimates            Wallis and Futuna Islands     2           876
21982 21982 Estimates            Wallis and Futuna Islands     2           876
21983 21983 Estimates            Wallis and Futuna Islands     2           876
      ISO3 Alpha-code ISO2 Alpha-code SDMX code**         Type Parent code Year
21978             WLF              WF         876 Country/Area         957 2018
21979             WLF              WF         876 Country/Area         957 2019
21980             WLF              WF         876 Country/Area         957 2020
21981             WLF              WF         876 Country/Area         957 2021
21982             WLF              WF         876 Country/Area         957 2022
21983             WLF              WF         876 Country/Area         957 2023
      Total Population, as of 1 January (thousands)
21978                                        11.861
21979                                         11.74
21980                                        11.632
21981                                          11.6
21982                                        11.535
21983                                        11.421
      Total Population, as of 1 July (thousands)
21978                                       11.8
21979                                     11.686
21980                                     11.616
21981                                     11.568
21982                                     11.478
21983                                      11.37
      Male Population, as of 1 July (thousands)
21978                                     5.694
21979                                     5.629
21980                                     5.587
21981                                     5.555
21982                                     5.495
21983                                      5.42
      Female Population, as of 1 July (thousands)
21978                                       6.106
21979                                       6.057
21980                                       6.029
21981                                       6.013
21982                                       5.984
21983                                       5.951
      Population Density, as of 1 July (persons per square km)
21978                                                   84.289
21979                                                   83.471
21980                                                   82.971
21981                                                   82.625
21982                                                   81.986
21983                                                   81.218
      Population Sex Ratio, as of 1 July (males per 100 females)
21978                                                     93.245
21979                                                     92.934
21980                                                     92.653
21981                                                     92.391
21982                                                     91.828
21983                                                     91.069
      Median Age, as of 1 July (years)
21978                           34.455
21979                           35.056
21980                            35.59
21981                           36.085
21982                           36.599
21983                           37.166
      Natural Change, Births minus Deaths (thousands)
21978                                           0.045
21979                                           0.064
21980                                           0.028
21981                                           0.011
21982                                           0.014
21983                                            0.01
      Rate of Natural Change (per 1,000 population)
21978                                         3.848
21979                                         5.449
21980                                         2.409
21981                                         0.962
21982                                         1.172
21983                                           0.8
      Population Change (thousands) Population Growth Rate (percentage)
21978                        -0.121                              -1.025
21979                        -0.108                              -0.924
21980                        -0.032                              -0.275
21981                        -0.065                              -0.562
21982                        -0.114                              -0.993
21983                        -0.101                              -0.888
      Population Annual Doubling Time (years) Births (thousands)
21978                                     ...              0.126
21979                                     ...              0.146
21980                                     ...              0.111
21981                                     ...              0.102
21982                                     ...                0.1
21983                                     ...              0.098
      Births by women aged 15 to 19 (thousands)
21978                                     0.004
21979                                     0.004
21980                                     0.004
21981                                     0.004
21982                                     0.005
21983                                     0.005
      Crude Birth Rate (births per 1,000 population)
21978                                         10.678
21979                                          12.46
21980                                          9.566
21981                                           8.86
21982                                          8.695
21983                                          8.579
      Total Fertility Rate (live births per woman)
21978                                        1.716
21979                                        2.048
21980                                        1.574
21981                                        1.459
21982                                        1.423
21983                                         1.41
      Net Reproduction Rate (surviving daughters per woman)
21978                                                 0.816
21979                                                 0.975
21980                                                  0.75
21981                                                 0.695
21982                                                 0.678
21983                                                 0.672
      Mean Age Childbearing (years)
21978                        29.726
21979                        29.318
21980                        29.939
21981                        30.087
21982                        30.172
21983                        30.174
      Sex Ratio at Birth (males per 100 female births) Total Deaths (thousands)
21978                                            104.8                    0.081
21979                                            104.8                    0.082
21980                                            104.8                    0.083
21981                                            104.8                    0.091
21982                                            104.8                    0.086
21983                                            104.8                    0.088
      Male Deaths (thousands) Female Deaths (thousands)
21978                   0.042                     0.038
21979                   0.043                     0.039
21980                   0.044                      0.04
21981                   0.048                     0.043
21982                   0.045                     0.041
21983                   0.046                     0.042
      Crude Death Rate (deaths per 1,000 population)
21978                                           6.83
21979                                          7.011
21980                                          7.157
21981                                          7.898
21982                                          7.523
21983                                          7.779
      Life Expectancy at Birth, both sexes (years)
21978                                       77.763
21979                                       77.994
21980                                       78.164
21981                                       77.461
21982                                       78.501
21983                                       78.629
      Male Life Expectancy at Birth (years)
21978                                76.835
21979                                77.058
21980                                 77.22
21981                                76.452
21982                                77.537
21983                                77.661
      Female Life Expectancy at Birth (years)
21978                                  78.761
21979                                  78.993
21980                                  79.167
21981                                  78.523
21982                                  79.494
21983                                  79.616
      Life Expectancy at Age 15, both sexes (years)
21978                                        63.956
21979                                         64.16
21980                                        64.314
21981                                        63.578
21982                                        64.617
21983                                        64.734
      Male Life Expectancy at Age 15 (years)
21978                                 62.679
21979                                 62.881
21980                                 63.029
21981                                 62.234
21982                                 63.318
21983                                 63.434
      Female Life Expectancy at Age 15 (years)
21978                                    65.33
21979                                   65.533
21980                                   65.686
21981                                   65.002
21982                                   65.973
21983                                   66.081
      Life Expectancy at Age 65, both sexes (years)
21978                                        17.662
21979                                         17.79
21980                                        17.885
21981                                        17.494
21982                                        18.088
21983                                        18.171
      Male Life Expectancy at Age 65 (years)
21978                                 16.428
21979                                 16.562
21980                                  16.66
21981                                 16.283
21982                                 16.855
21983                                 16.936
      Female Life Expectancy at Age 65 (years)
21978                                   18.937
21979                                   19.077
21980                                   19.183
21981                                   18.791
21982                                   19.383
21983                                   19.458
      Life Expectancy at Age 80, both sexes (years)
21978                                         8.545
21979                                         8.614
21980                                         8.657
21981                                         8.399
21982                                         8.756
21983                                         8.788
      Male Life Expectancy at Age 80 (years)
21978                                  7.771
21979                                  7.842
21980                                  7.894
21981                                  7.691
21982                                  7.998
21983                                  8.044
      Female Life Expectancy at Age 80 (years)
21978                                    9.086
21979                                    9.169
21980                                    9.233
21981                                    8.948
21982                                    9.353
21983                                    9.398
      Infant Deaths, under age 1 (thousands)
21978                                  0.002
21979                                  0.002
21980                                  0.001
21981                                  0.001
21982                                  0.001
21983                                  0.001
      Infant Mortality Rate (infant deaths per 1,000 live births)
21978                                                      12.084
21979                                                      11.793
21980                                                      11.618
21981                                                       11.39
21982                                                      11.239
21983                                                       11.11
      Live Births Surviving to Age 1 (thousands)
21978                                      0.125
21979                                      0.144
21980                                       0.11
21981                                      0.101
21982                                      0.099
21983                                      0.097
      Under-Five Deaths, under age 5 (thousands)
21978                                      0.002
21979                                      0.002
21980                                      0.002
21981                                      0.001
21982                                      0.001
21983                                      0.001
      Under-Five Mortality (deaths under age 5 per 1,000 live births)
21978                                                          14.055
21979                                                          13.718
21980                                                          13.507
21981                                                          13.243
21982                                                          13.067
21983                                                          12.916
      Mortality before Age 40, both sexes (deaths under age 40 per 1,000 live births)
21978                                                                          26.888
21979                                                                          26.215
21980                                                                          25.763
21981                                                                          26.156
21982                                                                           24.87
21983                                                                          24.581
      Male Mortality before Age 40 (deaths under age 40 per 1,000 male live births)
21978                                                                        21.233
21979                                                                        20.641
21980                                                                        20.217
21981                                                                        20.939
21982                                                                        19.418
21983                                                                        19.166
      Female Mortality before Age 40 (deaths under age 40 per 1,000 female live births)
21978                                                                            32.433
21979                                                                            31.726
21980                                                                              31.2
21981                                                                            31.338
21982                                                                            30.233
21983                                                                            29.876
      Mortality before Age 60, both sexes (deaths under age 60 per 1,000 live births)
21978                                                                          94.749
21979                                                                          92.539
21980                                                                          91.017
21981                                                                         101.035
21982                                                                          88.146
21983                                                                          87.033
      Male Mortality before Age 60 (deaths under age 60 per 1,000 male live births)
21978                                                                         94.39
21979                                                                        92.107
21980                                                                        90.466
21981                                                                       102.928
21982                                                                        87.334
21983                                                                        86.219
      Female Mortality before Age 60 (deaths under age 60 per 1,000 female live births)
21978                                                                            95.851
21979                                                                            93.777
21980                                                                            92.233
21981                                                                            100.01
21982                                                                            89.388
21983                                                                            88.339
      Mortality between Age 15 and 50, both sexes (deaths under age 50 per 1,000 alive at age 15)
21978                                                                                      29.695
21979                                                                                      28.958
21980                                                                                      28.419
21981                                                                                        32.4
21982                                                                                      27.412
21983                                                                                      27.078
      Male Mortality between Age 15 and 50 (deaths under age 50 per 1,000 males alive at age 15)
21978                                                                                     27.553
21979                                                                                     26.794
21980                                                                                     26.252
21981                                                                                     31.332
21982                                                                                     25.224
21983                                                                                      24.88
      Female Mortality between Age 15 and 50 (deaths under age 50 per 1,000 females alive at age 15)
21978                                                                                         31.458
21979                                                                                         30.727
21980                                                                                         30.183
21981                                                                                         33.237
21982                                                                                         29.185
21983                                                                                         28.817
      Mortality between Age 15 and 60, both sexes (deaths under age 60 per 1,000 alive at age 15)
21978                                                                                      80.652
21979                                                                                      78.755
21980                                                                                      77.432
21981                                                                                       87.87
21982                                                                                      74.975
21983                                                                                      74.002
      Male Mortality between Age 15 and 60 (deaths under age 60 per 1,000 males alive at age 15)
21978                                                                                      84.27
21979                                                                                     82.234
21980                                                                                     80.771
21981                                                                                     93.584
21982                                                                                     77.976
21983                                                                                     76.965
      Female Mortality between Age 15 and 60 (deaths under age 60 per 1,000 females alive at age 15)
21978                                                                                         77.584
21979                                                                                         75.855
21980                                                                                         74.567
21981                                                                                         82.807
21982                                                                                         72.199
21983                                                                                         71.326
      Net Number of Migrants (thousands)
21978                             -0.167
21979                             -0.167
21980                             -0.071
21981                             -0.071
21982                             -0.126
21983                             -0.107
      Net Migration Rate (per 1,000 population)
21978                                   -14.152
21979                                   -14.291
21980                                    -6.112
21981                                    -6.138
21982                                   -10.978
21983                                     -9.41</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(u_nations_full<span class="sc">$</span><span class="st">`</span><span class="at">Type</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Country/Area Development Group      Income Group   Label/Separator 
            17538               370               666                 5 
           Region        SDG region     Special other         Subregion 
              444               666               666              1554 
            World 
               74 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Note: this data includes both a 3 character and 2 character country-specific code, this is important because each other dataset includes one or the other, the United Nations data allows all data sets to be merged together</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>u_nations_full <span class="ot">&lt;-</span> u_nations_full <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE =</span> <span class="st">`</span><span class="at">ISO3 Alpha-code</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE2 =</span> <span class="st">`</span><span class="at">ISO2 Alpha-code</span><span class="st">`</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Restricting to countries of interest</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>u_nations_countries <span class="ot">&lt;-</span> countries <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(u_nations_full, <span class="at">by =</span> <span class="fu">join_by</span>(CODE))</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(u_nations_countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     CODE               Index         Variant         
 Length:7400        Min.   : 2891   Length:7400       
 Class :character   1st Qu.: 9458   Class :character  
 Mode  :character   Median :14102   Mode  :character  
                    Mean   :13281                     
                    3rd Qu.:17932                     
                    Max.   :21465                     
 Region, subregion, country or area *    Notes           Location code  
 Length:7400                          Length:7400        Min.   : 20.0  
 Class :character                     Class :character   1st Qu.:201.2  
 Mode  :character                     Mode  :character   Median :390.0  
                                                         Mean   :412.7  
                                                         3rd Qu.:626.5  
                                                         Max.   :894.0  
    CODE2           SDMX code**            Type            Parent code    
 Length:7400        Length:7400        Length:7400        Min.   : 905.0  
 Class :character   Class :character   Class :character   1st Qu.: 915.0  
 Mode  :character   Mode  :character   Mode  :character   Median : 923.5  
                                                          Mean   :1150.7  
                                                          3rd Qu.: 926.0  
                                                          Max.   :5501.0  
     Year           Total Population, as of 1 January (thousands)
 Length:7400        Length:7400                                  
 Class :character   Class :character                             
 Mode  :character   Mode  :character                             
                                                                 
                                                                 
                                                                 
 Total Population, as of 1 July (thousands)
 Length:7400                               
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Male Population, as of 1 July (thousands)
 Length:7400                              
 Class :character                         
 Mode  :character                         
                                          
                                          
                                          
 Female Population, as of 1 July (thousands)
 Length:7400                                
 Class :character                           
 Mode  :character                           
                                            
                                            
                                            
 Population Density, as of 1 July (persons per square km)
 Length:7400                                             
 Class :character                                        
 Mode  :character                                        
                                                         
                                                         
                                                         
 Population Sex Ratio, as of 1 July (males per 100 females)
 Length:7400                                               
 Class :character                                          
 Mode  :character                                          
                                                           
                                                           
                                                           
 Median Age, as of 1 July (years)
 Length:7400                     
 Class :character                
 Mode  :character                
                                 
                                 
                                 
 Natural Change, Births minus Deaths (thousands)
 Length:7400                                    
 Class :character                               
 Mode  :character                               
                                                
                                                
                                                
 Rate of Natural Change (per 1,000 population) Population Change (thousands)
 Length:7400                                   Length:7400                  
 Class :character                              Class :character             
 Mode  :character                              Mode  :character             
                                                                            
                                                                            
                                                                            
 Population Growth Rate (percentage) Population Annual Doubling Time (years)
 Length:7400                         Length:7400                            
 Class :character                    Class :character                       
 Mode  :character                    Mode  :character                       
                                                                            
                                                                            
                                                                            
 Births (thousands) Births by women aged 15 to 19 (thousands)
 Length:7400        Length:7400                              
 Class :character   Class :character                         
 Mode  :character   Mode  :character                         
                                                             
                                                             
                                                             
 Crude Birth Rate (births per 1,000 population)
 Length:7400                                   
 Class :character                              
 Mode  :character                              
                                               
                                               
                                               
 Total Fertility Rate (live births per woman)
 Length:7400                                 
 Class :character                            
 Mode  :character                            
                                             
                                             
                                             
 Net Reproduction Rate (surviving daughters per woman)
 Length:7400                                          
 Class :character                                     
 Mode  :character                                     
                                                      
                                                      
                                                      
 Mean Age Childbearing (years) Sex Ratio at Birth (males per 100 female births)
 Length:7400                   Length:7400                                     
 Class :character              Class :character                                
 Mode  :character              Mode  :character                                
                                                                               
                                                                               
                                                                               
 Total Deaths (thousands) Male Deaths (thousands) Female Deaths (thousands)
 Length:7400              Length:7400             Length:7400              
 Class :character         Class :character        Class :character         
 Mode  :character         Mode  :character        Mode  :character         
                                                                           
                                                                           
                                                                           
 Crude Death Rate (deaths per 1,000 population)
 Length:7400                                   
 Class :character                              
 Mode  :character                              
                                               
                                               
                                               
 Life Expectancy at Birth, both sexes (years)
 Length:7400                                 
 Class :character                            
 Mode  :character                            
                                             
                                             
                                             
 Male Life Expectancy at Birth (years) Female Life Expectancy at Birth (years)
 Length:7400                           Length:7400                            
 Class :character                      Class :character                       
 Mode  :character                      Mode  :character                       
                                                                              
                                                                              
                                                                              
 Life Expectancy at Age 15, both sexes (years)
 Length:7400                                  
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 15 (years)
 Length:7400                           
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 15 (years)
 Length:7400                             
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Life Expectancy at Age 65, both sexes (years)
 Length:7400                                  
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 65 (years)
 Length:7400                           
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 65 (years)
 Length:7400                             
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Life Expectancy at Age 80, both sexes (years)
 Length:7400                                  
 Class :character                             
 Mode  :character                             
                                              
                                              
                                              
 Male Life Expectancy at Age 80 (years)
 Length:7400                           
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Female Life Expectancy at Age 80 (years)
 Length:7400                             
 Class :character                        
 Mode  :character                        
                                         
                                         
                                         
 Infant Deaths, under age 1 (thousands)
 Length:7400                           
 Class :character                      
 Mode  :character                      
                                       
                                       
                                       
 Infant Mortality Rate (infant deaths per 1,000 live births)
 Length:7400                                                
 Class :character                                           
 Mode  :character                                           
                                                            
                                                            
                                                            
 Live Births Surviving to Age 1 (thousands)
 Length:7400                               
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Under-Five Deaths, under age 5 (thousands)
 Length:7400                               
 Class :character                          
 Mode  :character                          
                                           
                                           
                                           
 Under-Five Mortality (deaths under age 5 per 1,000 live births)
 Length:7400                                                    
 Class :character                                               
 Mode  :character                                               
                                                                
                                                                
                                                                
 Mortality before Age 40, both sexes (deaths under age 40 per 1,000 live births)
 Length:7400                                                                    
 Class :character                                                               
 Mode  :character                                                               
                                                                                
                                                                                
                                                                                
 Male Mortality before Age 40 (deaths under age 40 per 1,000 male live births)
 Length:7400                                                                  
 Class :character                                                             
 Mode  :character                                                             
                                                                              
                                                                              
                                                                              
 Female Mortality before Age 40 (deaths under age 40 per 1,000 female live births)
 Length:7400                                                                      
 Class :character                                                                 
 Mode  :character                                                                 
                                                                                  
                                                                                  
                                                                                  
 Mortality before Age 60, both sexes (deaths under age 60 per 1,000 live births)
 Length:7400                                                                    
 Class :character                                                               
 Mode  :character                                                               
                                                                                
                                                                                
                                                                                
 Male Mortality before Age 60 (deaths under age 60 per 1,000 male live births)
 Length:7400                                                                  
 Class :character                                                             
 Mode  :character                                                             
                                                                              
                                                                              
                                                                              
 Female Mortality before Age 60 (deaths under age 60 per 1,000 female live births)
 Length:7400                                                                      
 Class :character                                                                 
 Mode  :character                                                                 
                                                                                  
                                                                                  
                                                                                  
 Mortality between Age 15 and 50, both sexes (deaths under age 50 per 1,000 alive at age 15)
 Length:7400                                                                                
 Class :character                                                                           
 Mode  :character                                                                           
                                                                                            
                                                                                            
                                                                                            
 Male Mortality between Age 15 and 50 (deaths under age 50 per 1,000 males alive at age 15)
 Length:7400                                                                               
 Class :character                                                                          
 Mode  :character                                                                          
                                                                                           
                                                                                           
                                                                                           
 Female Mortality between Age 15 and 50 (deaths under age 50 per 1,000 females alive at age 15)
 Length:7400                                                                                   
 Class :character                                                                              
 Mode  :character                                                                              
                                                                                               
                                                                                               
                                                                                               
 Mortality between Age 15 and 60, both sexes (deaths under age 60 per 1,000 alive at age 15)
 Length:7400                                                                                
 Class :character                                                                           
 Mode  :character                                                                           
                                                                                            
                                                                                            
                                                                                            
 Male Mortality between Age 15 and 60 (deaths under age 60 per 1,000 males alive at age 15)
 Length:7400                                                                               
 Class :character                                                                          
 Mode  :character                                                                          
                                                                                           
                                                                                           
                                                                                           
 Female Mortality between Age 15 and 60 (deaths under age 60 per 1,000 females alive at age 15)
 Length:7400                                                                                   
 Class :character                                                                              
 Mode  :character                                                                              
                                                                                               
                                                                                               
                                                                                               
 Net Number of Migrants (thousands) Net Migration Rate (per 1,000 population)
 Length:7400                        Length:7400                              
 Class :character                   Class :character                         
 Mode  :character                   Mode  :character                         
                                                                             
                                                                             
                                                                             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(u_nations_countries, <span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 65
   CODE  Index Variant   Region, subregion, countr…¹ Notes `Location code` CODE2
   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;                       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;
 1 AND   13547 Estimates Andorra                     ""                 20 AD   
 2 AND   13548 Estimates Andorra                     ""                 20 AD   
 3 AND   13549 Estimates Andorra                     ""                 20 AD   
 4 AND   13550 Estimates Andorra                     ""                 20 AD   
 5 AND   13551 Estimates Andorra                     ""                 20 AD   
 6 AND   13552 Estimates Andorra                     ""                 20 AD   
 7 AND   13553 Estimates Andorra                     ""                 20 AD   
 8 AND   13554 Estimates Andorra                     ""                 20 AD   
 9 AND   13555 Estimates Andorra                     ""                 20 AD   
10 AND   13556 Estimates Andorra                     ""                 20 AD   
11 AND   13557 Estimates Andorra                     ""                 20 AD   
12 AND   13558 Estimates Andorra                     ""                 20 AD   
13 AND   13559 Estimates Andorra                     ""                 20 AD   
14 AND   13560 Estimates Andorra                     ""                 20 AD   
15 AND   13561 Estimates Andorra                     ""                 20 AD   
16 AND   13562 Estimates Andorra                     ""                 20 AD   
17 AND   13563 Estimates Andorra                     ""                 20 AD   
18 AND   13564 Estimates Andorra                     ""                 20 AD   
19 AND   13565 Estimates Andorra                     ""                 20 AD   
20 AND   13566 Estimates Andorra                     ""                 20 AD   
# ℹ abbreviated name: ¹​`Region, subregion, country or area *`
# ℹ 58 more variables: `SDMX code**` &lt;chr&gt;, Type &lt;chr&gt;, `Parent code` &lt;dbl&gt;,
#   Year &lt;chr&gt;, `Total Population, as of 1 January (thousands)` &lt;chr&gt;,
#   `Total Population, as of 1 July (thousands)` &lt;chr&gt;,
#   `Male Population, as of 1 July (thousands)` &lt;chr&gt;,
#   `Female Population, as of 1 July (thousands)` &lt;chr&gt;,
#   `Population Density, as of 1 July (persons per square km)` &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Only country level data is left</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(u_nations_countries<span class="sc">$</span><span class="st">`</span><span class="at">Type</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Country/Area 
        7400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Restricting to data columns of interest and renaming to easier to use names</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>u_nations <span class="ot">&lt;-</span> u_nations_countries <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(CODE, CODE2,<span class="st">`</span><span class="at">Region, subregion, country or area *</span><span class="st">`</span>, <span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Population Density, as of 1 July (persons per square km)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Median Age, as of 1 July (years)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Population Growth Rate (percentage)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Total Fertility Rate (live births per woman)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Crude Death Rate (deaths per 1,000 population)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Life Expectancy at Birth, both sexes (years)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Net Migration Rate (per 1,000 population)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>), </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_density =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Population Density, as of 1 July (persons per square km)</span><span class="st">`</span>), </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">median_age =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Median Age, as of 1 July (years)</span><span class="st">`</span>), </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_growth_rate =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Population Growth Rate (percentage)</span><span class="st">`</span>), </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">fertility_rate =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Total Fertility Rate (live births per woman)</span><span class="st">`</span>), </span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">death_rate =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Crude Death Rate (deaths per 1,000 population)</span><span class="st">`</span>), </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">life_expect =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Life Expectancy at Birth, both sexes (years)</span><span class="st">`</span>), </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">migration =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Net Migration Rate (per 1,000 population)</span><span class="st">`</span>),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">country_un =</span> <span class="st">`</span><span class="at">Region, subregion, country or area *</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Population Density, as of 1 July (persons per square km)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Median Age, as of 1 July (years)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Population Growth Rate (percentage)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Total Fertility Rate (live births per woman)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Crude Death Rate (deaths per 1,000 population)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Life Expectancy at Birth, both sexes (years)</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Net Migration Rate (per 1,000 population)</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Region, subregion, country or area *</span><span class="st">`</span>)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Summary of United Nations data</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(u_nations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     CODE              CODE2             total_pop         pop_density      
 Length:100         Length:100         Min.   :    16.1   Min.   :   3.317  
 Class :character   Class :character   1st Qu.:  1193.4   1st Qu.:  38.250  
 Mode  :character   Mode  :character   Median :  6164.8   Median :  92.795  
                                       Mean   : 25805.5   Mean   : 253.440  
                                       3rd Qu.: 23178.6   3rd Qu.: 217.779  
                                       Max.   :337790.1   Max.   :8300.970  
   median_age    pop_growth_rate   fertility_rate    death_rate    
 Min.   :15.69   Min.   :-2.9390   Min.   :0.881   Min.   : 0.958  
 1st Qu.:26.38   1st Qu.: 0.1578   1st Qu.:1.524   1st Qu.: 6.153  
 Median :32.85   Median : 0.7615   Median :1.712   Median : 7.556  
 Mean   :32.15   Mean   : 0.8556   Mean   :2.108   Mean   : 7.872  
 3rd Qu.:39.20   3rd Qu.: 1.6193   3rd Qu.:2.371   3rd Qu.: 9.283  
 Max.   :47.26   Max.   : 4.1710   Max.   :4.866   Max.   :15.467  
  life_expect      migration         country_un       
 Min.   :60.27   Min.   :-46.1300   Length:100        
 1st Qu.:71.07   1st Qu.: -1.7240   Class :character  
 Median :75.85   Median :  0.3230   Mode  :character  
 Mean   :75.23   Mean   :  0.6065                     
 3rd Qu.:81.49   3rd Qu.:  4.6720                     
 Max.   :85.26   Max.   : 40.2810                     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(u_nations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  CODE  CODE2 total_pop pop_density median_age pop_growth_rate fertility_rate
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;
1 AND   AD         76.5      163.         41.7           1.77            1.04
2 ATG   AG         91.4      208.         33.8           0.5             1.47
3 ARG   AR      44973.        16.1        30.8           0.635           1.88
4 ARM   AM       2904.       102.         34.5          -0.24            1.60
5 AUS   AU      25483.         3.32       36.5           1.36            1.67
6 AUT   AT       8881.       108.         42.4           0.475           1.46
# ℹ 4 more variables: death_rate &lt;dbl&gt;, life_expect &lt;dbl&gt;, migration &lt;dbl&gt;,
#   country_un &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Virtually no missing data</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(u_nations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>countries_2 <span class="ot">&lt;-</span> u_nations <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(CODE, CODE2)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(countries_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving data to the processed data folder</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(u_nations, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed-data"</span>,<span class="st">"u_nations.rds"</span>))</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting the total population so I can convert COVID burden from number of cases/deaths to number of cases/deaths per 100,000 persons</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>u_nations_total_pop <span class="ot">&lt;-</span> u_nations_countries <span class="sc">%&gt;%</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">|</span> Year <span class="sc">==</span> <span class="dv">2021</span> <span class="sc">|</span> Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(CODE, CODE2, Year, <span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop =</span> <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Total Population, as of 1 July (thousands)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> Year, </span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> total_pop,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"total_pop_"</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_pop_2020 =</span> total_pop_2020,</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_pop_2021 =</span> total_pop_2021,</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_pop_2022 =</span> total_pop_2022</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_20_22 =</span> (total_pop_2020 <span class="sc">+</span> total_pop_2021 <span class="sc">+</span> total_pop_2022)<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="co">#Summary of United Nations data</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(u_nations_total_pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     CODE              CODE2           total_pop_2020     total_pop_2021    
 Length:100         Length:100         Min.   :    15.6   Min.   :    15.2  
 Class :character   Class :character   1st Qu.:  1191.2   1st Qu.:  1188.9  
 Mode  :character   Mode  :character   Median :  6217.6   Median :  6270.5  
                                       Mean   : 26048.6   Mean   : 26261.4  
                                       3rd Qu.: 23357.3   3rd Qu.: 23514.4  
                                       Max.   :339436.2   Max.   :340161.4  
 total_pop_2022     total_pop_20_22    
 Min.   :    14.7   Min.   :    0.455  
 1st Qu.:  1187.0   1st Qu.:   35.670  
 Median :  6331.7   Median :  188.198  
 Mean   : 26496.7   Mean   :  788.067  
 3rd Qu.: 23676.5   3rd Qu.:  705.482  
 Max.   :341534.0   Max.   :10211.316  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(u_nations_total_pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  CODE  CODE2 total_pop_2020 total_pop_2021 total_pop_2022 total_pop_20_22
  &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;
1 AND   AD              77.4           78.4           79.7            2.35
2 ATG   AG              91.8           92.3           92.8            2.77
3 ARG   AR           45192.         45312.         45408.          1359.  
4 ARM   AM            2891.          2870.          2881.            86.4 
5 AUS   AU           25744.         25956.         26201.           779.  
6 AUT   AT            8921.          8967.          9065.           270.  </code></pre>
</div>
</div>
</section>
<section id="covid19-data" class="level4">
<h4 class="anchored" data-anchor-id="covid19-data">COVID19 data</h4>
<p>This data source includes weekly COVD case count data on 239 countries. The data set includes 440640 rows, but about half have missing data on new case counts. Completeness of data will have to be reviewed once the data are restricted to countries with vaccination coverage estimates in the years of interest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Importing HPV vaccination program characteristics</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>covid_raw <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw-data"</span>,<span class="st">"WHO-COVID-19-global-daily-data.csv"</span>), <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#There are missing data, year of introduction is missing for about a third of countries</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(covid_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gives total number of countries in the dataset</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(covid_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 440640</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting the number of countires - 239</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>num_countries <span class="ot">&lt;-</span> <span class="fu">table</span>(covid_raw<span class="sc">$</span>Country_code)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(num_countries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 239</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(covid_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Date_reported      Country_code         Country           WHO_region       
 Length:440640      Length:440640      Length:440640      Length:440640     
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
   New_cases       Cumulative_cases      New_deaths       Cumulative_deaths
 Min.   : -65079   Min.   :        0   Min.   :-3520.00   Min.   :      0  
 1st Qu.:      3   1st Qu.:     5438   1st Qu.:    0.00   1st Qu.:     34  
 Median :     62   Median :    51220   Median :    0.00   Median :    650  
 Mean   :   3735   Mean   :  1912261   Mean   :   33.88   Mean   :  20804  
 3rd Qu.:    689   3rd Qu.:   601911   3rd Qu.:    7.00   3rd Qu.:   7475  
 Max.   :6966046   Max.   :103436829   Max.   :44047.00   Max.   :1212505  
 NA's   :232516                        NA's   :231575                      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Date_reported Country_code              Country WHO_region New_cases
1    2020-01-04           SB      Solomon Islands        WPR         0
2    2020-01-04           LK            Sri Lanka       SEAR         0
3    2020-01-04           SY Syrian Arab Republic        EMR        NA
4    2020-01-04           TJ           Tajikistan        EUR        NA
5    2020-01-04           TH             Thailand       SEAR         0
6    2020-01-04           AE United Arab Emirates        EMR        NA
  Cumulative_cases New_deaths Cumulative_deaths
1                0          0                 0
2                0          0                 0
3                0         NA                 0
4                0         NA                 0
5                0          0                 0
6                0         NA                 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Have to rename the 2 character country code for merging</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>covid_prelim <span class="ot">&lt;-</span> covid_raw <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE2 =</span> Country_code)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Restricting to countries of interest</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">&lt;-</span> countries_2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(covid_prelim, <span class="at">by =</span> <span class="fu">join_by</span>(CODE2))  <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(u_nations_total_pop, <span class="at">by=</span><span class="fu">join_by</span>(CODE2)) <span class="sc">%&gt;%</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_covid =</span> <span class="fu">substr</span>(Date_reported, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span> <span class="co">#Extracting the year from the date of data submission </span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>CODE.x) <span class="sc">%&gt;%</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE =</span> CODE.y) <span class="sc">%&gt;%</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_covid <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">|</span> year_covid <span class="sc">==</span> <span class="dv">2021</span> <span class="sc">|</span> year_covid <span class="sc">==</span> <span class="dv">2022</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CODE2, year_covid) <span class="sc">%&gt;%</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CODE2, year_covid) <span class="sc">%&gt;%</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co">#Taking last row in a given year per country</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_covid <span class="sc">==</span> <span class="dv">2022</span> ) <span class="sc">%&gt;%</span> <span class="co">#restricted to 2022</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(CODE, CODE2, year_covid, Date_reported, Country, Cumulative_cases, Cumulative_deaths, total_pop_20_22) <span class="sc">%&gt;%</span> <span class="co">#dropping unnecessary variables </span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Cumulative_case_rate =</span> Cumulative_cases <span class="sc">/</span> total_pop_20_22,</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">Cumulative_death_rate =</span> Cumulative_deaths <span class="sc">/</span> total_pop_20_22) <span class="sc">%&gt;%</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Cumulative_cases, <span class="sc">-</span>Cumulative_deaths)</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
# Groups:   CODE2, year_covid [6]
  CODE  CODE2 year_covid Date_reported Country              total_pop_20_22
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;chr&gt;                          &lt;dbl&gt;
1 AND   AD    2022       2022-12-31    Andorra                         2.35
2 ARE   AE    2022       2022-12-31    United Arab Emirates          295.  
3 ATG   AG    2022       2022-12-31    Antigua and Barbuda             2.77
4 ARM   AM    2022       2022-12-31    Armenia                        86.4 
5 ARG   AR    2022       2022-12-31    Argentina                    1359.  
6 AUT   AT    2022       2022-12-31    Austria                       270.  
# ℹ 2 more variables: Cumulative_case_rate &lt;dbl&gt;, Cumulative_death_rate &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Confirming all dates of submission were on 12-31-22</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(covid<span class="sc">$</span>Date_reported)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
2022-12-31 
       100 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving data to the processed data folder</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(covid, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed-data"</span>,<span class="st">"covid.rds"</span>))</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirmed that cumulative cases was the sum of the new_cases on all days prior</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co"># covid_year_total &lt;- covid %&gt;%</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(CODE2, year_covid) %&gt;%</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(total_cases = sum(New_cases, na.rm = TRUE), .groups = "drop")</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   covid_combo &lt;- covid %&gt;% left_join(covid_year_total, by = join_by(CODE2, year_covid))</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   summary(covid_combo)</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co"># head(covid_combo)</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a><span class="co"># last_entry &lt;- covid_combo %&gt;%</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(CODE2, year_covid) %&gt;%</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   slice_tail(n = 1) %&gt;%</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(year_covid == 2020 | year_covid == 2021 | year_covid == 2022 ) %&gt;%</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   dplyr::select(CODE2, year_covid, total_cases, Country, New_cases, Cumulative_cases)</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="co"># print(last_entry)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="combining-all-datasets" class="level2">
<h2 class="anchored" data-anchor-id="combining-all-datasets">Combining all datasets</h2>
<p>Above, HPV vaccination coverage and vaccine program characteristic data were combined. Here, I’m combining that data with the United Nations demographic characteristics and COVID burden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Joining United Nations, COVID, and HPV coverage and vaccination program data</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>project_data_pre <span class="ot">&lt;-</span> combo <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(u_nations, <span class="at">by =</span> <span class="fu">join_by</span>(CODE)) <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(covid, <span class="at">by =</span> <span class="fu">join_by</span>(CODE)) </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Data checks</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(project_data_pre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 30
  CODE  NAME        coverage_2022 coverage_2019 COUNTRYNAME WHO_REGION WB_INCOME
  &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    
1 AND   Andorra                83            64 Andorra     EUR        High inc…
2 ATG   Antigua an…             2            11 Antigua an… AMR        High inc…
3 ARG   Argentina              83            87 Argentina   AMR        Upper mi…
4 ARM   Armenia                43            19 Armenia     EUR        Upper mi…
5 AUS   Australia              77            89 Australia   WPR        High inc…
6 AUT   Austria                56            35 Austria     EUR        High inc…
# ℹ 23 more variables: HPV_NATIONAL_SCHEDULE &lt;chr&gt;,
#   HPV_YEAR_INTRODUCTION &lt;int&gt;, HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;,
#   HPV_INT_DOSES &lt;chr&gt;, doses_rec &lt;dbl&gt;, CODE2.x &lt;chr&gt;, total_pop &lt;dbl&gt;,
#   pop_density &lt;dbl&gt;, median_age &lt;dbl&gt;, pop_growth_rate &lt;dbl&gt;,
#   fertility_rate &lt;dbl&gt;, death_rate &lt;dbl&gt;, life_expect &lt;dbl&gt;, migration &lt;dbl&gt;,
#   country_un &lt;chr&gt;, CODE2.y &lt;chr&gt;, year_covid &lt;chr&gt;, Date_reported &lt;chr&gt;,
#   Country &lt;chr&gt;, total_pop_20_22 &lt;dbl&gt;, Cumulative_case_rate &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#confirming the rows merged correctly across datasets by comparing the country name in each dataset</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>name_mismatch <span class="ot">&lt;-</span> project_data_pre <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME <span class="sc">!=</span> COUNTRYNAME <span class="sc">|</span> NAME <span class="sc">!=</span> country_un <span class="sc">|</span> NAME <span class="sc">!=</span> Country <span class="sc">|</span> COUNTRYNAME <span class="sc">!=</span> country_un <span class="sc">|</span> COUNTRYNAME <span class="sc">!=</span> Country <span class="sc">|</span> Country <span class="sc">!=</span> country_un)  </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(name_mismatch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 30
  CODE  NAME        coverage_2022 coverage_2019 COUNTRYNAME WHO_REGION WB_INCOME
  &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    
1 CIV   Côte d&amp;#39…            46             6 Côte d'Ivo… AFR        Lower mi…
2 FSM   Micronesia…            70            70 Micronesia… WPR        Lower mi…
3 NLD   Netherland…            64            63 Netherland… EUR        High inc…
4 GBR   United Kin…            68            84 United Kin… EUR        High inc…
# ℹ 23 more variables: HPV_NATIONAL_SCHEDULE &lt;chr&gt;,
#   HPV_YEAR_INTRODUCTION &lt;int&gt;, HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;,
#   HPV_INT_DOSES &lt;chr&gt;, doses_rec &lt;dbl&gt;, CODE2.x &lt;chr&gt;, total_pop &lt;dbl&gt;,
#   pop_density &lt;dbl&gt;, median_age &lt;dbl&gt;, pop_growth_rate &lt;dbl&gt;,
#   fertility_rate &lt;dbl&gt;, death_rate &lt;dbl&gt;, life_expect &lt;dbl&gt;, migration &lt;dbl&gt;,
#   country_un &lt;chr&gt;, CODE2.y &lt;chr&gt;, year_covid &lt;chr&gt;, Date_reported &lt;chr&gt;,
#   Country &lt;chr&gt;, total_pop_20_22 &lt;dbl&gt;, Cumulative_case_rate &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#4 countries did not have perfectly matching names across the datasets, but all differences were due to formatting (eg., abbreviations or punctuation), confirming the merge was successful</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Dropping all extra versions of country</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>project_data <span class="ot">&lt;-</span> project_data_pre <span class="sc">%&gt;%</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>COUNTRYNAME, <span class="sc">-</span>NAME, <span class="sc">-</span>country_un, <span class="sc">-</span>CODE2.x, <span class="sc">-</span>Date_reported) <span class="sc">%&gt;%</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">CODE2 =</span> CODE2.y) <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">coverage_diff =</span> coverage_2022 <span class="sc">-</span> coverage_2019) <span class="co">#Creating outcome variable of difference in vaccination coverage between 2022 and 2019</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Looking at missingness for each included variable</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(project_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(project_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(WB_INCOME)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 26
  CODE  coverage_2022 coverage_2019 WHO_REGION WB_INCOME HPV_NATIONAL_SCHEDULE
  &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;                
1 COK              14            97 WPR        &lt;NA&gt;      Yes                  
# ℹ 20 more variables: HPV_YEAR_INTRODUCTION &lt;int&gt;,
#   HPV_PRIM_DELIV_STRATEGY &lt;chr&gt;, HPV_SEX &lt;chr&gt;, HPV_INT_DOSES &lt;chr&gt;,
#   doses_rec &lt;dbl&gt;, total_pop &lt;dbl&gt;, pop_density &lt;dbl&gt;, median_age &lt;dbl&gt;,
#   pop_growth_rate &lt;dbl&gt;, fertility_rate &lt;dbl&gt;, death_rate &lt;dbl&gt;,
#   life_expect &lt;dbl&gt;, migration &lt;dbl&gt;, CODE2 &lt;chr&gt;, year_covid &lt;chr&gt;,
#   Country &lt;chr&gt;, total_pop_20_22 &lt;dbl&gt;, Cumulative_case_rate &lt;dbl&gt;,
#   Cumulative_death_rate &lt;dbl&gt;, coverage_diff &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#One country (Cook Islands) is missing on country income, all other data are complete</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Histogram of the outcome (difference in HPV vaccination coverage between 2022 and 2019)</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(project_data<span class="sc">$</span>coverage_diff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="processing-code_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving data to the processed data folder</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(project_data, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"processed-data"</span>,<span class="st">"project_data.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>